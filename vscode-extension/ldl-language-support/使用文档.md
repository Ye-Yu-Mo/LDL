# LDL Language Support 使用文档

## 📚 概述

LDL Language Support 是为 Learning Domain Language (LDL) 提供的 VS Code 插件，专门用于编写和管理方法论知识库。LDL 语言让你能够用代码化的方式描述学习方法、思维模式和知识体系。

## ✨ 核心功能

### 🎨 语法高亮
- **关键字高亮**: `fn`, `pipeline`, `class`, `using`, `macro`, `const` 等
- **类型高亮**: 基础类型 (`str`, `int`, `bool`) 和自定义类型 (`Steps`, `AnalysisSteps`)
- **装饰器高亮**: `@label("标签名")`
- **注释高亮**: `///` 文档注释, `//` 行注释, `/* */` 块注释
- **操作符高亮**: `->`, `=`, `==`, `&&`, `::` 等
- **函数调用高亮**: 参数名、版本信息等

### 🔍 符号导航和搜索

#### 1. 定义跳转 (`Ctrl+点击` 或 `F12`)
```ldl
fn SQ3R(version: "academic") -> Steps { ... }
fn SQ3R() -> Steps { ... }

pipeline study_flow {
    SQ3R(version="academic")  // Ctrl+点击可选择跳转到哪个定义
    SQ3R()                    // 跳转到默认版本
}
```

#### 2. 文档符号导航 (`Ctrl+Shift+O`)
按 `Ctrl+Shift+O` 打开当前文件的符号导航，符号按 **label** 分组显示：

```
📁 philosophy
  ├── dialectical_materialism (function)
  ├── practice_cognition (function)
📁 marxism
  ├── class_analysis (function)
  ├── historical_materialism (pipeline)
📄 Unlabeled
  ├── helper_function (function)
```

#### 3. 全局符号搜索 (`Ctrl+T`)

**按名称搜索**:
```
dialectical  → 找到所有包含 "dialectical" 的符号
```

**按 label 搜索**:
```
@label:philosophy     → 找到所有带 "philosophy" 标签的符号
label:marxism         → 找到所有带 "marxism" 标签的符号
```

**按类型搜索**:
```
type:function    → 找到所有函数
type:pipeline    → 找到所有 pipeline
t:fn            → type:function 的简写
```

### 🏷️ Label 标签系统

#### 标签定义
```ldl
/// 辩证唯物主义分析方法
@label("philosophy")
@label("dialectical_materialism")
fn dialectical_materialism() -> AnalysisSteps {
    // 函数实现
}
```

#### 多标签支持
一个符号可以有多个标签，便于多维度分类：
```ldl
@label("learning")
@label("reading")
@label("academic")
fn SQ3R() -> Steps { ... }
```

#### 标签搜索和过滤
- **文档符号**: 按标签分组显示
- **全局搜索**: 使用 `@label:标签名` 精确查找
- **快速定位**: 通过标签快速找到相关方法

## 📝 LDL 语言语法指南

### 基础语法

#### 1. 类型定义
```ldl
// 类型别名
using AnalysisSteps = Steps
using ResearchMethod = str

// 常量定义
const MAX_DEPTH = 10
const DEFAULT_METHOD = "systematic"

// 宏定义
macro ITERATION_COUNT 3
macro DEBUG_MODE true
```

#### 2. 函数定义
```ldl
/// 基础函数
fn analyze_data(input: str, depth: int = 3) -> AnalysisSteps {
    // 函数体
    return result
}

/// 版本化函数 - 支持同名函数的不同版本
fn analyze_data(version: "advanced", input: str) -> AnalysisSteps {
    // 高级版本实现
}
```

#### 3. Pipeline 定义
```ldl
/// 学习流程
@label("learning")
@label("systematic")
pipeline comprehensive_learning {
    // 调用具体的方法函数
    SQ3R(version="academic")
    cornell_notes()
    spaced_repetition(interval: 24)
}
```

#### 4. 类定义
```ldl
@label("learning_system")
class LearningMethod {
    // 静态方法
    static fn create_instance(type: str) -> LearningMethod {
        // 实现
    }

    // 实例方法
    fn execute(context: str) -> Steps {
        // 实现
    }
}
```

### 高级特性

#### 1. 具象化函数调用
不使用抽象的字符串描述，而是使用具体的函数调用：

```ldl
// ❌ 抽象描述
let steps = [
    "观察现象",
    "分析矛盾"
]

// ✅ 具象化调用
observe_surface_phenomena(target: "social_issue")
identify_internal_contradictions(depth: 3)
analyze_contradiction_movement()
```

#### 2. 命名参数
```ldl
// 支持命名参数调用
analyze_data(
    input: "user_behavior",
    depth: 5,
    method: "quantitative"
)

// 版本参数
SQ3R(version: "academic", context: "research_paper")
```

#### 3. 文档注释
```ldl
/// 系统化阅读方法
/// 适用于学术论文和技术文档的深度阅读
@label("reading")
@label("academic")
fn SQ3R() -> Steps {
    // 实现
}
```

## ⌨️ 快捷键一览

| 功能 | 快捷键 | 说明 |
|------|--------|------|
| 跳转到定义 | `Ctrl+点击` 或 `F12` | 支持多定义选择 |
| 文档符号导航 | `Ctrl+Shift+O` | 按 label 分组显示 |
| 全局符号搜索 | `Ctrl+T` | 支持 label 和类型过滤 |
| 查找所有引用 | `Shift+F12` | 查找符号的所有使用位置 |
| 重命名符号 | `F2` | 批量重命名符号 |

## 🔧 搜索技巧

### 精确搜索
```bash
@label:philosophy           # 精确匹配 philosophy 标签
type:function              # 只显示函数
t:pipeline                 # 只显示 pipeline (简写)
```

### 模糊搜索
```bash
dialectical               # 名称包含 "dialectical" 的符号
learning                  # 标签或名称包含 "learning" 的符号
```

### 组合搜索
在全局搜索中，可以组合使用多种搜索方式快速定位目标符号。

## 📋 最佳实践

### 1. 标签命名规范
- 使用英文小写和下划线: `learning_method`, `data_analysis`
- 层次化标签: `philosophy` > `dialectical_materialism`
- 功能性标签: `reading`, `writing`, `analysis`

### 2. 文档注释
- 每个函数都应该有 `///` 文档注释
- 简洁描述功能和适用场景
- 注明版本差异

### 3. 版本管理
```ldl
// 为不同场景创建版本化函数
fn reading_method(version: "casual") -> Steps { ... }    // 休闲阅读
fn reading_method(version: "academic") -> Steps { ... }  // 学术阅读
fn reading_method(version: "speed") -> Steps { ... }     // 速读
```

### 4. 代码组织
- 相关函数使用相同的标签分组
- 复杂流程使用 pipeline 组织
- 通用功能提取为可复用函数

## 🐛 故障排除

### 常见问题

**1. 跳转功能不工作**
- 确保文件已保存
- 检查语法是否正确
- 重启 VS Code

**2. 符号不显示**
- 检查文件编码是否为 UTF-8
- 确认文件扩展名为 `.ldl`
- 检查语法错误

**3. 搜索结果为空**
- 检查搜索语法是否正确
- 确认标签名称拼写
- 尝试重新加载窗口 (`Ctrl+Shift+P` > `Reload Window`)

### 性能优化
- 大型项目建议定期重启 VS Code 清理缓存
- 避免在单个文件中定义过多符号

## 📞 支持与反馈

如有问题或建议，请：
1. 检查此文档的故障排除部分
2. 重启 VS Code 尝试解决
3. 向开发团队反馈具体问题和复现步骤

---

*Happy coding with LDL! 🚀*